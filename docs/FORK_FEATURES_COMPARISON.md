# Misskeyフォーク機能比較調査

各Misskeyフォーク（Sharkey、CherryPick、Misskey.io）の主要な機能改善をカテゴリ別にまとめた調査レポート。misskey-rsの機能計画の参考資料として活用する。

*調査日: 2025-12-11*

---

## サマリー

| フォーク | 特徴 | 主要な差別化ポイント |
|---------|------|---------------------|
| **Sharkey** | 最も機能豊富なフォーク | Mastodon互換API、投稿編集連合、高度なモデレーション |
| **CherryPick** | UI/UX改善に注力 | MFM装飾UI、集中モード、アイコンデコレーション詳細設定 |
| **Misskey.io** | 運用最適化・独自拡張 | 効果音カスタマイズ、本家へのcherry-pick貢献 |

---

## 1. 連合・ActivityPub関連

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| 投稿編集の完全連合対応 | 編集履歴も閲覧可能、インタラクションした全員に配信 | 🔴 高 |
| Mastodon互換API（OAuth2含む） | 既存Mastodonクライアントからの利用可能 | 🔴 高 |
| いいね/リアクションの適切な連合 | Mastodon/Pleroma/Akkomaへ正しく送信 | 🔴 高 |
| 引用リノートのMastodon連合 | Mastodonフォークと正しく連合 | 🟡 中 |
| ユーザー単位Authorized Fetch | Secure Modeを個別に有効/無効化 | 🟡 中 |
| リモートユーザーのリンク検証表示 | リモートプロフィールでも検証結果を表示 | 🟢 低 |

### CherryPick

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| リモート絵文字即時インポート | ノート本文・リアクションビューアから即座にインポート | 🟢 低 |

---

## 2. データインポート・エクスポート

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| マルチプラットフォームインポート | Mastodon、Pleroma/Akkoma、Misskey/Firefish、Twitter、Instagram、Facebook対応 | 🟡 中 |
| GDPRスタイルデータエクスポート | ユーザーが自分に関連するすべてのデータをエクスポート可能 | 🟡 中 |

---

## 3. タイムライン・フィード

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| 「following」ビュー | Cohostの「following feed」にインスパイア | 🟢 低 |
| バブルタイムライン | 管理者設定のリモートインスタンスリストからの全ノート表示 | 🟡 中 |
| スレッドリアルタイム更新 | スレッドビューがリアルタイムで更新 | 🟡 中 |
| ミュートインスタンスのフォロー例外 | ミュートインスタンスでもフォローユーザーは表示 | 🟢 低 |
| タイムラインフィルター | ブースト表示、ファイル付きノートのみ等 | 🟡 中 |
| Bot非表示オプション | Botをタイムラインから非表示 | 🟢 低 |

### CherryPick

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| InstanceTickerクリック | InstanceTickerをクリックしてノート詳細表示 | 🟢 低 |

---

## 4. 投稿・ノート機能

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| ブースト別公開範囲 | ブースト/リノートごとに公開範囲を指定 | 🟡 中 |
| ブースト回数制限 | 1ノートにつき1ユーザー1ブーストのみ | 🟢 低 |
| 予約投稿 | ノートを予約して投稿 | 🟡 中 |
| デフォルトCW設定 | CWのデフォルト値を設定可能 | 🟢 低 |
| 親ノート折りたたみ | タイムラインで返信の「親」ノートを折りたたみ | 🟢 低 |
| 全箇所翻訳対応 | 引用時や返信表示時など、どこでも翻訳可能 | 🟢 低 |

### CherryPick

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| テキスト装飾UI | MFM、HTML、Markdownをボタンから簡単に追加 | 🟢 低 |
| リノート/引用ボタン表示選択 | 表示方法を選択可能 | 🟢 低 |
| ノートクリックで詳細表示 | クリックオプション | 🟢 低 |

---

## 5. MFM拡張

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| 数式レンダリング | LaTeX等の数式表示 | 🟢 低 |
| 双方向テキスト | RTL言語対応 | 🟢 低 |
| 新MFM構文 | `$[crop]`、`$[fade]`、`$[followmouse]` | 🟢 低 |
| インライン画像 | `![alt text](image url)`形式 | 🟢 低 |
| 拡張ハッシュタグ | より多くの文字を受け入れる（`#æîç`等） | 🟢 低 |
| 検索ボックス改善 | 「search」終端のみで検索ボックス作成しない | 🟢 低 |
| 検索エンジン選択 | MFM `[search]`の検索エンジン指定 | 🟢 低 |
| MFMチートシート | ノート作成時の参照用 | 🟢 低 |

---

## 6. メディア・ドライブ

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| モジュール音楽再生 | トラッカー形式の音楽ファイル対応 | 🟢 低 |
| Flash再生 | swfファイル対応 | 🟢 低 |
| 動画ストリーミング最適化 | より速く再生開始 | 🟡 中 |
| altテキスト欠落マーク | altなしメディアにマーク表示 | 🟡 中 |
| 長いaltテキスト対応 | 文字数上限緩和 | 🟢 低 |
| altテキスト警告 | alt無し投稿時に警告オプション | 🟡 中 |
| ドライブ検索 | ファイル・フォルダを名前/説明で検索 | 🟡 中 |
| 添付デフォルト折りたたみ | 添付ファイルをデフォルトで折りたたみ | 🟢 低 |
| メディアダウンロードボタン | 音声・動画のダウンロードボタン | 🟢 低 |

### CherryPick

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| 画像圧縮方式選択 | 圧縮アルゴリズムを選択可能 | 🟢 低 |

---

## 7. プロフィール・ユーザー

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| Listenbrainz統合 | 連合対応の音楽再生ステータス | 🟢 低 |
| プロフィール背景画像 | 連合対応 | 🟢 低 |
| アバターデコレーション背面配置 | 尻尾など後ろに配置可能 | 🟢 低 |
| プロフィールタブ | ノート/すべて/ファイル付きタブ | 🟢 低 |
| ポップアッププロフィール拡張 | フォロー承認制表示、リモートプロフィール開く、カスタムフィールド | 🟢 低 |
| インデックス化無効 | ノートのインデックス化を無効化（連合対応） | 🟡 中 |
| RSSフィード無効化 | ノートのRSSフィードを無効化 | 🟢 低 |
| `fediverse:creator`属性 | リンクプレビューに帰属ドメイン表示 | 🟢 低 |

### CherryPick

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| アイコンデコレーション詳細設定 | 位置、サイズ、不透明度を細かく調整 | 🟢 低 |

---

## 8. UI/UX改善

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| ノートクリックで詳細表示 | モバイルで便利なオプション | 🟢 低 |
| 角丸/角型選択 | UI要素の形状を選択 | 🟢 低 |
| サインアウトボタン | ユーザーメニューに追加 | 🟢 低 |
| 会話CW一括展開/折りたたみ | ボタンで全CWを制御 | 🟢 低 |
| 長いノート全文表示 | 常に全文表示するオプション | 🟢 低 |
| CW常時展開 | CW付きノートを常に展開 | 🟢 低 |
| ワンボタンいいね | いいねとリアクションを分離 | 🟡 中 |
| MFMアニメーション制御 | 各ノートで有効/無効化 | 🟢 低 |
| スレッド深さ変更 | 詳細ビューの深さを変更可能（デフォルト5） | 🟢 低 |
| 戻るボタン | 各ページ上部に追加 | 🟢 低 |
| テーマフォント指定 | テーマでフォントを指定 | 🟢 低 |
| 可読CSSクラス名 | ブラウザカスタマイズ容易化 | 🟢 低 |
| 接続切断警告無効化 | 警告を無効化可能 | 🟢 低 |
| デフォルトリアクション設定 | いいね/リアクションのデフォルト絵文字 | 🟢 低 |

### CherryPick

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| 集中モード | 全通知を消音 | 🟢 低 |
| リアクションツールチップ | 状態に応じてツールチップ変更 | 🟢 低 |
| 編集時刻表示 | ヘッダーアイコンホバーで最終編集時刻 | 🟢 低 |
| 翻訳完了振動 | 翻訳完了を振動で通知 | 🟢 低 |

---

## 9. 検索・フィルタリング

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| ファイル付きノート検索 | 検索結果をファイル付きに限定 | 🟡 中 |
| 検索+lookup統合 | 完全修飾リモートユーザー名を検索 | 🟡 中 |
| Meilisearch活用拡張 | より多くのケースで活用 | 🟡 中 |
| 検索ウィジェット | ウィジェットとして追加可能 | 🟢 低 |
| 大文字小文字無視の絵文字検索 | 検索の使いやすさ向上 | 🟢 低 |
| 絵文字検索マッチ順序 | 最も近いマッチを最初に表示 | 🟢 低 |

---

## 10. アンテナ

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| インスタンス指定アンテナ | 特定インスタンスの全ユーザーを表示 | 🟡 中 |

### CherryPick

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| ユーザー除外 | アンテナで特定ユーザーを除外 | 🟢 低 |

---

## 11. モデレーション・管理者機能

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| 登録承認必須 | 新規ユーザー登録に承認を必須化 | 🟡 中 |
| ユーザーサイレンス | サイレンス機能 | 🟡 中 |
| メディアNSFWマーク | ユーザー全メディアまたはインスタンス全体を強制NSFW | 🟡 中 |
| 引用機能削除 | 特定ユーザー/インスタンスの引用を無効化 | 🟢 低 |
| CW強制 | ユーザーにCWを強制 | 🟢 低 |
| Botトレンド除外 | Botをトレンドから除外 | 🟢 低 |
| リモート絵文字削除 | 削除可能 | 🟢 低 |
| 実績機能無効化 | 無効化可能 | 🟢 低 |
| リモートユーザー強制更新 | 詳細情報を強制更新 | 🟢 低 |
| 文字数制限設定 | ローカル/リモート別に6つの設定 | 🔴 高 |
| 寄付URL設定 | インスタンス設定 | 🟢 低 |
| ユーザーファイル一括削除 | モデレーターが実行可能 | 🟢 低 |
| インスタンスファイル一括削除 | リモートインスタンスのファイルを削除 | 🟢 低 |
| レポート自動拒否 | 特定インスタンスからのレポートを自動拒否 | 🟢 低 |
| ブロックインスタンス非表示 | 非ログインユーザーに表示しない | 🟡 中 |

---

## 12. プライバシー・セキュリティ

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| 外部リンク確認ダイアログ | ドメインホワイトリスト設定可能 | 🟡 中 |
| レート制限強化 | パスワードチェック/WebSocketにレート制限 | 🔴 高 |
| argon2ハッシュ | bcryptの代わりにargon2を使用 | 🔴 高 |
| robots.txt設定 | 内容を管理者が設定可能 | 🟢 低 |

---

## 13. パフォーマンス・インフラ

### Sharkey

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| 小型コンテナイメージ | 未使用依存関係を除外 | 🟡 中 |
| URLプレビューキャッシュ | サーバーでキャッシュ | 🟡 中 |
| Redis UNIXソケット | ソケット経由接続 | 🟢 低 |
| PostgreSQL tsvector検索 | 全文検索エンジン | ✅ 実装済 |
| BunnyCDN対応 | S3互換サービスに加えて対応 | 🟢 低 |
| 環境変数設定上書き | `MK_CONFIG_DB_PASS`等で上書き | 🔴 高 |
| 複数設定ファイル | ワイルドカード対応 | 🟢 低 |
| 翻訳サービス拡張 | DeepLX-JS、LibreTranslate対応 | 🟡 中 |
| BSD対応 | ビルドと実行をサポート | 🟢 低 |
| ActivityPubログ出力 | 連合デバッグ用 | 🟢 低 |

### CherryPick

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| jemallocメモリアロケータ | パフォーマンス最適化 | ✅ Rust標準 |
| データ節約モード | コードハイライトロード削減 | 🟢 低 |

---

## 14. Misskey.io独自機能

| 機能 | 説明 | 実装優先度 |
|------|------|-----------|
| 効果音カスタマイズ | 独自専用ボイスを選択可能 | 🟢 低 |
| 本家へのcherry-pick | ElasticSearchサポート等 | (参考) |

---

## misskey-rsでの優先実装候補

### Tier 1: 最優先（Rustの強みを活かせる + 本家との差別化）

| 機能 | カテゴリ | 理由 |
|------|---------|------|
| 投稿編集の連合対応 | 連合 | 既存編集APIの拡張、ユーザー要望大 |
| Mastodon互換API | 連合 | エコシステム互換性、クライアント流用 |
| いいね/リアクションの適切な連合 | 連合 | Fediverse互換性の根幹 |
| argon2ハッシュ | セキュリティ | Rustの暗号ライブラリ活用 |
| レート制限強化 | セキュリティ | セキュリティ強化、DoS対策 |
| 環境変数設定上書き | インフラ | 12-factor app対応、コンテナ運用 |
| ローカル/リモート別文字数制限 | 管理 | 運用柔軟性 |

### Tier 2: 中優先（UX改善 + 運用改善）

| 機能 | カテゴリ | 理由 |
|------|---------|------|
| バブルタイムライン | タイムライン | コミュニティ連携 |
| タイムラインフィルター | タイムライン | ユーザビリティ |
| 予約投稿 | ノート | 需要の高い機能 |
| ワンボタンいいね | UI/UX | Mastodon移行ユーザー対応 |
| altテキスト警告 | メディア | アクセシビリティ |
| ドライブ検索 | メディア | ファイル管理の利便性 |
| ファイル付きノート検索 | 検索 | 検索機能強化 |
| 検索+lookup統合 | 検索 | UX改善 |
| インスタンス指定アンテナ | アンテナ | アンテナ機能強化 |
| 登録承認必須 | 管理 | スパム対策 |
| URLプレビューキャッシュ | パフォーマンス | 外部サーバー負荷軽減 |
| 外部リンク確認ダイアログ | プライバシー | フィッシング対策 |
| GDPRデータエクスポート | データ | 法規制対応 |

### Tier 3: 低優先（あると嬉しい）

| 機能 | カテゴリ | 理由 |
|------|---------|------|
| MFM拡張構文 | MFM | 表現力向上 |
| プロフィール背景画像 | プロフィール | カスタマイズ性 |
| 集中モード | UI/UX | ニッチな需要 |
| 翻訳サービス拡張 | インフラ | 選択肢の提供 |

---

## 実装済み機能との対応

| フォーク機能 | misskey-rs状況 | 備考 |
|-------------|---------------|------|
| PostgreSQL tsvector検索 | ✅ 実装済 | ENHANCEMENT_OPPORTUNITIES.md参照 |
| リモートアクターキャッシュ | ✅ 実装済 | 24時間キャッシュ |
| リプレイ攻撃防止 | ✅ 実装済 | タイムスタンプ/重複チェック |
| インスタンス別レート制限 | ✅ 実装済 | フェデレーション保護 |
| 高度な検索フィルタ | ✅ 実装済 | 日時範囲、リアクション数等 |
| 通知タイプフィルタ | ✅ 実装済 | include/excludeタイプ |

---

## 参照リンク

### Sharkey
- [Sharkey vs Misskey Comparison](https://docs.joinsharkey.org/docs/comparison/misskey/)
- [Sharkey GitHub](https://github.com/transfem-org/Sharkey)

### CherryPick
- [CherryPick Changelog](https://github.com/kokonect-link/cherrypick/blob/develop/CHANGELOG_CHERRYPICK.md)
- [CherryPick GitHub](https://github.com/kokonect-link/cherrypick)

### Misskey.io
- [MisskeyHQ Wiki - Misskey.io](https://wiki.misskey.io/ja/instances/misskey_io)
- [MisskeyIO GitHub](https://github.com/MisskeyIO/misskey)

---

## 更新履歴

| 日付 | 更新内容 |
|------|----------|
| 2025-12-11 | 初版作成 - Sharkey、CherryPick、Misskey.ioの機能調査 |
