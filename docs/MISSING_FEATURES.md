# Misskey-rs 機能実装ロードマップ

本家Misskeyとの機能差分と今後の実装計画。

**設計方針: 単なる互換実装ではなく、上位互換・改良版として実装する**

*Last Updated: 2025-12-11*

---

## 進捗サマリー

| Phase | 内容 | 状態 |
|-------|------|------|
| Phase 1 | 基本機能補完 | ✅ 完了 |
| Phase 2 | 発見性向上 | ✅ 完了 |
| Phase 3 | セキュリティ強化 | ✅ 完了 |
| Phase 4 | 高度な機能 | ✅ 完了 |
| Phase 5 | アカウント管理 | ✅ 完了 |
| Phase 6 | グループ機能 | ✅ 完了 |
| Phase 7 | 独自機能 | 🔧 10% |

**総合: 74%完了**

---

## Phase 1-6: 完了済み機能

<details>
<summary>クリックして展開</summary>

### Phase 1: 基本機能補完
- ✅ クリップ機能（検索、順序変更含む）
- ✅ ノートピン留め
- ✅ 予約投稿
- ✅ ワードフィルター（アクション選択、期限、統計）
- ✅ ノート編集（履歴保存）

### Phase 2: 発見性向上
- ✅ アンテナ（Aho-Corasick高速化、一括既読）
- ✅ チャンネル（タイムライン、検索、フォロー）
- ✅ インスタンスブロック/サイレンス

### Phase 3: セキュリティ強化
- ✅ 2FA（TOTP + バックアップコード）
- ✅ レート制限（エンドポイント別、IP別）
- ✅ OAuth 2.0（PKCE対応）
- ✅ WebAuthn/パスキー

### Phase 4: 高度な機能
- ✅ ページ/記事（カスタムURL、いいね）
- ✅ ギャラリー（タグ、いいね）
- ✅ 翻訳（DeepL, Google, LibreTranslate, OpenAI, Claude, Ollama）
- ✅ プッシュ通知（VAPID、静かな時間帯）
- ✅ メール通知（マルチプロバイダー、テンプレート）
- ✅ メディア処理インターフェース

### Phase 5: アカウント管理
- ✅ アカウント移行（also_known_as/moved_to_uri）
- ✅ アカウント削除（猶予期間付きソフト削除）
- ✅ アカウントエクスポート（プロフィール、フォロー）
- ✅ アカウントインポート（フォローCSV/JSON）

### Phase 6: グループ機能
- ✅ グループ基盤（オープン/招待制/承認制）
- ✅ ロールシステム（管理者/モデレーター/メンバー）
- ✅ グループAPI（作成、招待、参加、追放等）

</details>

---

## Phase 7: 独自機能（未着手・将来計画）

### 7.1 GraphQL API
- [ ] async-graphql導入
- [ ] Query/Mutation/Subscription
- [ ] DataLoaderによるN+1解決
- [ ] GraphQL Playground

### 7.2 プラグインシステム
- [ ] プラグインマニフェスト仕様
- [ ] WASMサンドボックス
- [ ] イベントフック
- [ ] UIカスタマイズポイント

### 7.3 Rhaiスクリプティング
- [ ] AiScript代替実装
- [ ] Misskey APIバインディング
- [ ] Play機能対応
- 詳細: [RHAI_SCRIPTING.md](RHAI_SCRIPTING.md)

### 7.4 高度な検索
- [ ] Meilisearch/Elasticsearch連携
- [ ] AND/OR/NOT構文
- [ ] 検索サジェスト
- [ ] 保存された検索

### 7.5 分析・統計ダッシュボード
- [ ] エンゲージメント分析
- [ ] フォロワー成長グラフ
- [ ] 管理者向けインスタンス統計

### 7.6 AI/LLM統合
- [ ] コンテンツ要約
- [ ] 返信サジェスト
- [ ] 自動CW提案
- [ ] 画像説明生成

### 7.7 高度なモデレーション
- [ ] 自動スパム検出
- [ ] NSFW自動判定
- [ ] モデレーションキュー
- [ ] アピールシステム

---

## 残りの拡張機能（未実装）

### 各機能の拡張項目

| 機能 | 未実装拡張 |
|------|-----------|
| クリップ | クリップ間移動、ネスト、スマートクリップ |
| ピン留め | カテゴリ、期限付きピン留め |
| 予約投稿 | 繰り返し投稿、テンプレート変数 |
| ワードフィルター | フィルターグループ、インポート/エクスポート |
| ノート編集 | ActivityPub Update、差分ハイライト |
| アンテナ | ビジュアルクエリビルダー、共有アンテナ |
| チャンネル | カテゴリ、モデレーター、ActivityPub Group |
| グループ | グループ内限定ノート、グループDM |
| 2FA | 信頼済みデバイス、ログイン通知 |
| メディア | image-rs完全統合、遅延処理 |

---

## 技術的な注意点

### データベース
- SeaORM形式でエンティティ作成
- マイグレーション命名: `m{YYYYMMDD}_{NNNNNN}_{description}.rs`
- インデックス設計を忘れずに

### API
- Axum 0.8のルーティング形式 (`/{param}`)
- バリデーションはvalidatorクレート
- エラーはAppErrorに統一

### フェデレーション
- ActivityPub仕様準拠
- Misskey拡張は `_misskey_` プレフィックス
- FEP対応を検討

---

## 参照ドキュメント

- [TODO.md](TODO.md) - 優先順位付きタスクリスト
- [IMPLEMENTATION_STATUS.md](IMPLEMENTATION_STATUS.md) - 詳細実装状況
- [FORK_FEATURES.md](FORK_FEATURES.md) - フォーク機能比較
- [RHAI_SCRIPTING.md](RHAI_SCRIPTING.md) - スクリプティング計画
- [RUST_TECH_STACK.md](RUST_TECH_STACK.md) - 技術スタック
